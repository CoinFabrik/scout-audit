"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[7054],{95:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>u,frontMatter:()=>a,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"detectors/rust/assert-violation","title":"Assert violation","description":"Description","source":"@site/docs/detectors/rust/assert-violation.md","sourceDirName":"detectors/rust","slug":"/detectors/rust/assert-violation","permalink":"/scout-audit/docs/detectors/rust/assert-violation","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/detectors/rust/assert-violation.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Rust","permalink":"/scout-audit/docs/category/rust"},"next":{"title":"Avoid panic error","permalink":"/scout-audit/docs/detectors/rust/avoid-panic-error"}}');var r=s(3420),i=s(3774);const a={},o="Assert violation",c={},d=[{value:"Description",id:"description",level:2},{value:"Why is this bad?",id:"why-is-this-bad",level:3},{value:"Example",id:"example",level:3},{value:"Remediated example",id:"remediated-example",level:2},{value:"How is it detected?",id:"how-is-it-detected",level:2}];function l(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"assert-violation",children:"Assert violation"})}),"\n",(0,r.jsx)(t.h2,{id:"description",children:"Description"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["Category: ",(0,r.jsx)(t.code,{children:"Validations and error handling"})]}),"\n",(0,r.jsxs)(t.li,{children:["Severity: ",(0,r.jsx)(t.code,{children:"Enhancement"})]}),"\n",(0,r.jsxs)(t.li,{children:["Detectors: ",(0,r.jsx)(t.a,{href:"https://github.com/CoinFabrik/scout-audit/blob/main/detectors/rust/assert-violation/src/lib.rs",children:"assert-violation"})]}),"\n"]}),"\n",(0,r.jsxs)(t.p,{children:["The ",(0,r.jsx)(t.code,{children:"assert!"})," macro is used in Rust to ensure that a certain condition holds true at a certain point in your code."]}),"\n",(0,r.jsx)(t.h3,{id:"why-is-this-bad",children:"Why is this bad?"}),"\n",(0,r.jsxs)(t.p,{children:["The ",(0,r.jsx)(t.code,{children:"assert!"})," macro can cause the contract to panic. It is recommended to avoid this, because it stops its execution, which might lead the contract to an inconsistent state if the panic occurs in the middle of state changes. Additionally, the panic could cause a transaction to fail."]}),"\n",(0,r.jsx)(t.h3,{id:"example",children:"Example"}),"\n",(0,r.jsx)(t.p,{children:"Consider the following snippet code:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-rust",children:'pub fn assert_if_greater_than_10(_env: Env, value: u128) -> bool {\n    assert!(value <= 10, "value should be less than 10");\n    true\n}\n'})}),"\n",(0,r.jsx)(t.h2,{id:"remediated-example",children:"Remediated example"}),"\n",(0,r.jsx)(t.p,{children:"Consider using a proper error and return it:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-rust",children:"pub fn assert_if_greater_than_10(_env: Env, value: u128) -> Result<bool, AVError> {\n    if value <= 10 {\n        Ok(true)\n    } else {\n        Err(AVError::GreaterThan10)\n    }\n}\n"})}),"\n",(0,r.jsx)(t.h2,{id:"how-is-it-detected",children:"How is it detected?"}),"\n",(0,r.jsxs)(t.p,{children:["Checks for ",(0,r.jsx)(t.code,{children:"assert!"})," macro usage."]})]})}function u(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},3774:(e,t,s)=>{s.d(t,{R:()=>a,x:()=>o});var n=s(6672);const r={},i=n.createContext(r);function a(e){const t=n.useContext(i);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),n.createElement(i.Provider,{value:t},e.children)}}}]);