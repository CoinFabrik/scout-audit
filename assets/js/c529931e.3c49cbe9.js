"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[1842],{326:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>a,contentTitle:()=>d,default:()=>u,frontMatter:()=>o,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"precision-and-recall/substrate-first-evaluation","title":"Scout on Substrate: First precision report","description":"December, 2024.","source":"@site/docs/precision-and-recall/substrate-first-evaluation.md","sourceDirName":"precision-and-recall","slug":"/precision-and-recall/substrate-first-evaluation","permalink":"/scout-audit/docs/precision-and-recall/substrate-first-evaluation","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/precision-and-recall/substrate-first-evaluation.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Soroban Smart Contracts Examples","permalink":"/scout-audit/docs/learning/scout-soroban-examples"},"next":{"title":"Scout on Substrate: Second precision report","permalink":"/scout-audit/docs/precision-and-recall/substrate-second-evaluation"}}');var n=s(3420),r=s(3774);const o={},d="Scout on Substrate: First precision report",a={},c=[{value:"1. Introduction",id:"1-introduction",level:2},{value:"2. Compilation Errors",id:"2-compilation-errors",level:2},{value:"2.1. Common Types of Compilation Errors",id:"21-common-types-of-compilation-errors",level:3},{value:"2.2. Steps Taken to Address Issues",id:"22-steps-taken-to-address-issues",level:3},{value:"3. Precision and Recall by Detector",id:"3-precision-and-recall-by-detector",level:2},{value:"3.1. On Findings from Audited Projects",id:"31-on-findings-from-audited-projects",level:3},{value:"3.2. On Scout Findings from Unaudited Projects",id:"32-on-scout-findings-from-unaudited-projects",level:3},{value:"4. Conclusion",id:"4-conclusion",level:2}];function l(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.header,{children:(0,n.jsx)(t.h1,{id:"scout-on-substrate-first-precision-report",children:"Scout on Substrate: First precision report"})}),"\n",(0,n.jsx)(t.p,{children:"December, 2024."}),"\n",(0,n.jsx)(t.h2,{id:"1-introduction",children:"1. Introduction"}),"\n",(0,n.jsx)(t.p,{children:"As part of the second milestone of our initiative to develop Scout static analyzer for Substrate, we aimed to assess Scout\u2019s precision and recall across a diverse set of repositories. This analysis involved running Scout over multiple projects, including pallets and runtimes, and comparing its findings against audited and unaudited code segments to identify true positives, false positives, and compilation issues affecting the tool\u2019s reliability."}),"\n",(0,n.jsxs)(t.p,{children:["To keep track of these analyses and their details, we created a dedicated ",(0,n.jsx)(t.a,{href:"https://docs.google.com/spreadsheets/d/1a7yfwU206FeSToDt74d-l6gSzhO9IYih6LK6e-07Ajo",children:"Excel spreadsheet"})," containing the auditor\u2019s notes, true positive/false positive classifications, and additional context on each finding. Request access if you are interested in following the analysis more closely. The selected issues from audited projects considered for this analysis were filtered from the ",(0,n.jsx)(t.a,{href:"https://github.com/CoinFabrik/scout-substrate-dataset",children:"Scout Substrate Dataset"}),", ensuring that the exact location of each issue in the code was informed in the audit report."]}),"\n",(0,n.jsxs)(t.p,{children:["The version of Scout considered in this analysis corresponds to commit ",(0,n.jsx)(t.a,{href:"https://github.com/CoinFabrik/scout-audit/tree/54c2328caa0b65b30f31fc2e244ac2419a52f98f",children:"54c2328caa0b65b30f31fc2e244ac2419a52f98f"}),"."]}),"\n",(0,n.jsx)(t.h2,{id:"2-compilation-errors",children:"2. Compilation Errors"}),"\n",(0,n.jsxs)(t.p,{children:["During the evaluation process, Scout encountered several compilation issues when analyzing certain projects. Some minor issues were addressed by simply running ",(0,n.jsx)(t.code,{children:"cargo update"})," to update dependencies. However, more complex errors were observed due to environmental incompatibilities, missing WASM targets, and misreporting statuses when the tool encountered compilation failures."]}),"\n",(0,n.jsx)(t.h3,{id:"21-common-types-of-compilation-errors",children:"2.1. Common Types of Compilation Errors"}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{children:"Type of Error"}),(0,n.jsx)(t.th,{children:"Description"}),(0,n.jsx)(t.th,{children:"Example/Note"}),(0,n.jsx)(t.th,{children:"Resolution Steps"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Dependency Conflicts / Missing Dependencies"}),(0,n.jsx)(t.td,{children:"Crates failing to compile due to out-of-date or conflicting dependencies."}),(0,n.jsxs)(t.td,{children:[(0,n.jsx)(t.code,{children:"proc-macro2"})," compilation error in Manta project"]}),(0,n.jsxs)(t.td,{children:["Update dependencies (e.g., ",(0,n.jsx)(t.code,{children:"cargo update"}),") or adjust Cargo.toml"]})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"WASM-Related Issues / Missing WASM STD"}),(0,n.jsx)(t.td,{children:"Certain projects requiring WASM targets not properly configured in the environment."}),(0,n.jsxs)(t.td,{children:["Manta Network\u2019s ",(0,n.jsx)(t.code,{children:"wasm-test"})," environment issue"]}),(0,n.jsxs)(t.td,{children:["Install WASM targets, ensure proper ",(0,n.jsx)(t.code,{children:"rustup"})," setup, update env."]})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Scout Misreporting Errors as \u201cAnalyzed\u201d"}),(0,n.jsx)(t.td,{children:"Scout not accurately reflecting compilation failures in the summary report."}),(0,n.jsx)(t.td,{children:'Manta Network crate showing "Analyzed" despite fail'}),(0,n.jsxs)(t.td,{children:["Addressed in ",(0,n.jsx)(t.a,{href:"https://github.com/CoinFabrik/scout-audit/issues/202",children:"GitHub Issue #202"}),". Fixed status reporting in ",(0,n.jsx)(t.a,{href:"https://github.com/CoinFabrik/scout-audit/pull/208",children:"GitHub PR #208"})]})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"Unresolved Rust Environment Configurations"}),(0,n.jsx)(t.td,{children:"Complex runtime environment or large monorepos causing partial build failures."}),(0,n.jsx)(t.td,{children:"Parallel, Astar, ReefChain builds failing"}),(0,n.jsx)(t.td,{children:"Adjust tool environment, ensure all required toolchains present"})]})]})]}),"\n",(0,n.jsx)(t.h3,{id:"22-steps-taken-to-address-issues",children:"2.2. Steps Taken to Address Issues"}),"\n",(0,n.jsxs)(t.p,{children:["Initial attempts to resolve dependency-related errors involved running ",(0,n.jsx)(t.code,{children:"cargo update"})," and verifying the presence of required toolchains (e.g., installing ",(0,n.jsx)(t.code,{children:"wasm32-unknown-unknown"})," targets). For more complex scenarios, like those found in the Manta Network repository, a dedicated GitHub issue was opened and the issue was resolved (See ",(0,n.jsx)(t.a,{href:"https://github.com/CoinFabrik/scout-audit/issues/202",children:"GitHub Issue #202"})," and ",(0,n.jsx)(t.a,{href:"https://github.com/CoinFabrik/scout-audit/pull/208",children:"PR #208"}),'). This issue focused on ensuring Scout accurately reports the "Compilation errors" status when a crate fails to compile, rather than incorrectly labeling the crate as "Analyzed."']}),"\n",(0,n.jsx)(t.p,{children:"In addition to resolving reporting inaccuracies, the development team examined environmental and configuration issues. They worked on updating Scout\u2019s handling of non-standard build environments and improving the logic that determines when a project is considered successfully analyzed versus when it is blocked by compilation hurdles."}),"\n",(0,n.jsx)(t.p,{children:"These actions have enhanced Scout\u2019s reliability and usability, ensuring that both minor and more systemic compilation issues are clearly surfaced and properly addressed in future analyses."}),"\n",(0,n.jsx)(t.h2,{id:"3-precision-and-recall-by-detector",children:"3. Precision and Recall by Detector"}),"\n",(0,n.jsx)(t.h3,{id:"31-on-findings-from-audited-projects",children:"3.1. On Findings from Audited Projects"}),"\n",(0,n.jsxs)(t.p,{children:["Of the total ",(0,n.jsx)(t.strong,{children:"N = 47"})," issues analyzed from audited projects extracted from the Scout Substrate Dataset, ",(0,n.jsx)(t.strong,{children:"M = 35"})," corresponded to code segments that could not be fully analyzed due to compilation errors. As mentioned in section ",(0,n.jsx)(t.code,{children:"2. Compilation Errors"})," above, these errors were reviewed and are being followed (See ",(0,n.jsx)(t.a,{href:"https://github.com/CoinFabrik/scout-audit/issues/202",children:"GitHub Issue #202"})," and ",(0,n.jsx)(t.a,{href:"https://github.com/CoinFabrik/scout-audit/pull/208",children:"PR #208"}),") to improve Scout. This left ",(0,n.jsx)(t.strong,{children:"N - M = 12"})," issues associated with code segments where Scout could run without errors. All 12 issues were associated with the ",(0,n.jsx)(t.code,{children:"integer_overflow_or_underflow"})," detector."]}),"\n",(0,n.jsx)(t.p,{children:"For these 12 issues, our auditor first reviewed each audit finding from which the analyzed code was extracted, determining whether Scout should detect the issue at the indicated line of code or not."}),"\n",(0,n.jsx)(t.p,{children:"Our auditor\u2019s analysis revealed that 6 of these issues were true positives\u2014Scout accurately detected a genuine issue\u2014while the other 6 were true negatives, as the flagged issues, despite being highlighted in audits, did not represent a detection point for the actual vulnerability and where correctly not detected by Scout."}),"\n",(0,n.jsx)(t.h3,{id:"32-on-scout-findings-from-unaudited-projects",children:"3.2. On Scout Findings from Unaudited Projects"}),"\n",(0,n.jsxs)(t.p,{children:["In addition to analyzing issues extracted from audited projects, our auditor also reviewed Scout\u2019s detections on newer commits from the same set of projects where the tool now compiled and ran successfully, but whose code segments were not previously audited. This resulted in the analysis of an additional set of ",(0,n.jsx)(t.strong,{children:"35"})," detections."]}),"\n",(0,n.jsx)(t.p,{children:"For each detection, the auditor assessed whether it represented a true vulnerability (true positive) or if Scout incorrectly flagged a safe code pattern (false positive). In cases where the code was deemed non-vulnerable, and Scout should not have reported it, these detections were classified as false positives. No false negatives were considered here, as all findings listed are those that Scout flagged."}),"\n",(0,n.jsx)(t.p,{children:"The following table summarizes the results by detector:"}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{children:"Detector"}),(0,n.jsx)(t.th,{children:"True Positives"}),(0,n.jsx)(t.th,{children:"False Positives"}),(0,n.jsx)(t.th,{children:"% False Positives"})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"known_vulnerabilities"}),(0,n.jsx)(t.td,{children:"1"}),(0,n.jsx)(t.td,{children:"0"}),(0,n.jsx)(t.td,{children:"0%"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"avoid_panic_error"}),(0,n.jsx)(t.td,{children:"2"}),(0,n.jsx)(t.td,{children:"0"}),(0,n.jsx)(t.td,{children:"0%"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"avoid-dispatcherror-other"}),(0,n.jsx)(t.td,{children:"3"}),(0,n.jsx)(t.td,{children:"0"}),(0,n.jsx)(t.td,{children:"0%"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"assert_violation"}),(0,n.jsx)(t.td,{children:"7"}),(0,n.jsx)(t.td,{children:"0"}),(0,n.jsx)(t.td,{children:"0%"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"unsafe_expect"}),(0,n.jsx)(t.td,{children:"0"}),(0,n.jsx)(t.td,{children:"17"}),(0,n.jsx)(t.td,{children:"100%"})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:"integer_overflow_or_underflow"}),(0,n.jsx)(t.td,{children:"0"}),(0,n.jsx)(t.td,{children:"5"}),(0,n.jsx)(t.td,{children:"100%"})]})]})]}),"\n",(0,n.jsxs)(t.p,{children:["As shown above, while several detectors produced valid results with no false positives, others\u2014particularly ",(0,n.jsx)(t.code,{children:"unsafe_expect"})," and ",(0,n.jsx)(t.code,{children:"integer_overflow_or_underflow"}),"\u2014yielded a high number of false positives. This insight helps guide future improvements to the detectors, aiming to reduce incorrect alerts and improve the overall reliability of Scout."]}),"\n",(0,n.jsx)(t.h2,{id:"4-conclusion",children:"4. Conclusion"}),"\n",(0,n.jsx)(t.p,{children:"This precision and recall exercise is a critical component in refining Scout\u2019s capabilities as we progress through Milestone 2 of our project. By running the tool against a variety of audited and unaudited projects, we have identified both the technical barriers\u2014such as compilation errors and environmental setup issues\u2014and the areas where our detectors need further refinement to minimize false positives and misclassifications."}),"\n",(0,n.jsx)(t.p,{children:"The results obtained here will inform the development of new detectors, improvements to existing ones, and enhancements to the supporting frameworks for analysis. Addressing these early findings will significantly improve Scout\u2019s usability, ensuring that developers and auditors can rely on its insights. Ultimately, by identifying precision and environment-related issues now, we are setting a strong foundation for the subsequent milestones, which will deliver a more robust and accurate tool."})]})}function u(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(l,{...e})}):l(e)}},3774:(e,t,s)=>{s.d(t,{R:()=>o,x:()=>d});var i=s(6672);const n={},r=i.createContext(n);function o(e){const t=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:o(e.components),i.createElement(r.Provider,{value:t},e.children)}}}]);