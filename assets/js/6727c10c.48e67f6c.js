"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[5184],{1759:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>r,default:()=>u,frontMatter:()=>a,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"detectors/ink/avoid-unsafe-block","title":"Avoid Unsafe Block","description":"What it does","source":"@site/docs/detectors/ink/26-avoid-unsafe-block.md","sourceDirName":"detectors/ink","slug":"/detectors/ink/avoid-unsafe-block","permalink":"/scout-audit/docs/detectors/ink/avoid-unsafe-block","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/detectors/ink/26-avoid-unsafe-block.md","tags":[],"version":"current","sidebarPosition":26,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Buffering Unsized Types","permalink":"/scout-audit/docs/detectors/ink/buffering-unsized-types"},"next":{"title":"Warning sr25519_verify","permalink":"/scout-audit/docs/detectors/ink/warning-sr25519-verify"}}');var i=t(5105),o=t(3881);const a={},r="Avoid Unsafe Block",d={},c=[{value:"What it does",id:"what-it-does",level:3},{value:"Why is this bad?",id:"why-is-this-bad",level:3},{value:"Example",id:"example",level:3},{value:"Implementation",id:"implementation",level:3}];function l(e){const n={a:"a",code:"code",h1:"h1",h3:"h3",header:"header",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"avoid-unsafe-block",children:"Avoid Unsafe Block"})}),"\n",(0,i.jsx)(n.h3,{id:"what-it-does",children:"What it does"}),"\n",(0,i.jsxs)(n.p,{children:["It tells not to use ",(0,i.jsx)(n.code,{children:"Unsafe Rust"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"why-is-this-bad",children:"Why is this bad?"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"Unsafe Rust"})," does not enforce memory safety guarantees at compile time."]}),"\n",(0,i.jsx)(n.h3,{id:"example",children:"Example"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-rust",children:"    #[ink(message)]\n    pub fn unsafe_function(&mut self, n: u64) -> u64 {\n        unsafe {\n            let mut i = n as f64;\n            let mut y = i.to_bits();\n            y = 0x5fe6ec85e7de30da - (y >> 1);\n            i = f64::from_bits(y);\n            i *= 1.5 - 0.5 * n as f64 * i * i;\n            i *= 1.5 - 0.5 * n as f64 * i * i;\n\n            let result_ptr: *mut f64 = &mut i;\n\n            (*result_ptr).to_bits()\n        }\n    }\n"})}),"\n",(0,i.jsx)(n.p,{children:"Use instead:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-rust",children:"    #[ink(message)]\n    pub fn safe_function(&mut self, n: u64) -> u64 {\n        let mut i = n as f64;\n        let mut y = i.to_bits();\n        y = 0x5fe6ec85e7de30da - (y >> 1);\n        i = f64::from_bits(y);\n        i *= 1.5 - 0.5 * n as f64 * i * i;\n        i *= 1.5 - 0.5 * n as f64 * i * i;\n\n        let result = &mut i;\n\n        result.to_bits()    \n    }\n"})}),"\n",(0,i.jsx)(n.h3,{id:"implementation",children:"Implementation"}),"\n",(0,i.jsxs)(n.p,{children:["The detector's implementation can be found at ",(0,i.jsx)(n.a,{href:"https://github.com/CoinFabrik/scout/tree/main/detectors/avoid-unsafe-block",children:"this link"}),"."]})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},3881:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>r});var s=t(8101);const i={},o=s.createContext(i);function a(e){const n=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);